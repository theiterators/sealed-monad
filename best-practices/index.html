<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Best Practices | Sealed Monad Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://theiterators.github.io/sealed-monad/best-practices"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Best Practices | Sealed Monad Documentation"><meta data-react-helmet="true" name="description" content="This document gathers best practices for leveraging the Sealed Monad pattern in your Scala applications. By following these guidelines, you&#x27;ll create domain‚Äêrich, type‚Äêsafe code that communicates intent clearly and minimizes runtime surprises."><meta data-react-helmet="true" property="og:description" content="This document gathers best practices for leveraging the Sealed Monad pattern in your Scala applications. By following these guidelines, you&#x27;ll create domain‚Äêrich, type‚Äêsafe code that communicates intent clearly and minimizes runtime surprises."><link data-react-helmet="true" rel="icon" href="/sealed-monad/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://theiterators.github.io/sealed-monad/best-practices"><link data-react-helmet="true" rel="alternate" href="https://theiterators.github.io/sealed-monad/best-practices" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://theiterators.github.io/sealed-monad/best-practices" hreflang="x-default"><link rel="stylesheet" href="/sealed-monad/assets/css/styles.ce1d0174.css">
<link rel="preload" href="/sealed-monad/assets/js/runtime~main.a5490e7f.js" as="script">
<link rel="preload" href="/sealed-monad/assets/js/main.15292e1b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sealed-monad/"><div class="navbar__logo"><img src="/sealed-monad/img/favicon.ico" alt="Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/sealed-monad/img/favicon.ico" alt="Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Sealed Monad</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sealed-monad/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/theiterators/sealed-monad" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/">Introduction to Sealed Monad</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/motivations">Motivations &amp; Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/installation">Installation Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/usecases">Practical Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/api-reference">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/sealed-monad/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/comparison">Comparison with Other Approaches</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/migration-guide">Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sealed-monad/conclusion">Conclusion</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Best Practices</h1></header><p>This document gathers best practices for leveraging the Sealed Monad pattern in your Scala applications. By following these guidelines, you&#x27;ll create domain‚Äêrich, type‚Äêsafe code that communicates intent clearly and minimizes runtime surprises.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1-designing-your-adts">1. Designing Your ADTs<a class="hash-link" href="#1-designing-your-adts" title="Direct link to heading">‚Äã</a></h2><p>The foundation of effective Sealed Monad usage is a well-designed ADT (Algebraic Data Type) for operation results.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-create-specific-descriptive-response-types">‚úÖ Create Specific, Descriptive Response Types<a class="hash-link" href="#-create-specific-descriptive-response-types" title="Direct link to heading">‚Äã</a></h3><p>Design ADTs that capture all possible outcomes of an operation clearly:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sealed trait UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object UserRegistrationResult {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  final case class Success(userId: String) extends UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object EmailAlreadyExists extends UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object InvalidEmail extends UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object PasswordTooWeak extends UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object UsernameInvalid extends UserRegistrationResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-avoid-generic-error-types">‚ùå Avoid Generic Error Types<a class="hash-link" href="#-avoid-generic-error-types" title="Direct link to heading">‚Äã</a></h3><p>Avoid overly general result types that hide the specifics of different outcomes:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Too generic - avoid this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sealed trait Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object Result {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case class Success(data: Any) extends Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case class Error(message: String) extends Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-model-domain-specific-edge-cases">‚úÖ Model Domain-Specific Edge Cases<a class="hash-link" href="#-model-domain-specific-edge-cases" title="Direct link to heading">‚Äã</a></h3><p>Include edge cases that are meaningful in your domain:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sealed trait PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object PaymentResult {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  final case class Success(transactionId: String) extends PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object InsufficientFunds extends PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object CardDeclined extends PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object PaymentMethodExpired extends PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object FraudDetected extends PaymentResult  // Domain-specific case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object ProcessorUnavailable extends PaymentResult</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2-structuring-your-code">2. Structuring Your Code<a class="hash-link" href="#2-structuring-your-code" title="Direct link to heading">‚Äã</a></h2><p>The way you organize your code impacts its readability and maintainability.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-separate-high-level-flow-from-implementation-details">‚úÖ Separate High-Level Flow from Implementation Details<a class="hash-link" href="#-separate-high-level-flow-from-implementation-details" title="Direct link to heading">‚Äã</a></h3><p>Create a clear hierarchical structure with high-level flows and focused helper methods:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import pl.iterators.sealedmonad.syntax._</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import pl.iterators.sealedmonad.Sealed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import cats.effect.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class OrderService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  userRepository: UserRepository,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  productRepository: ProductRepository,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  paymentService: PaymentService,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  orderRepository: OrderRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // High-level flow - clear and concise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def processOrder(userId: String, items: List[OrderItem]): IO[OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user     &lt;- findAndValidateUser(userId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      products &lt;- validateProductsAvailability(items)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      payment  &lt;- processPayment(user, products)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      order    &lt;- createOrder(user, products, payment)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } yield OrderResult.Success(order.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Mid-level methods with focused responsibilities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def findAndValidateUser(userId: String): Sealed[IO, User, OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implementation details here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userRepository.findById(userId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .valueOr[OrderResult](OrderResult.UserNotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .ensure(user =&gt; user.isActive, OrderResult.UserInactive)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def validateProductsAvailability(items: List[OrderItem]): Sealed[IO, List[Product], OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implementation details here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    items.traverse { item =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      productRepository.findById(item.productId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .valueOr[OrderResult](OrderResult.ProductNotFound(item.productId))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ensure(p =&gt; p.stock &gt;= item.quantity, OrderResult.InsufficientStock(item.productId))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }.seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def processPayment(user: User, products: List[Product]): Sealed[IO, String, OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implementation details here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val amount = calculateTotal(products)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    paymentService.processPayment(user.id, amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .attempt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        case Right(transactionId) =&gt; Right(transactionId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        case Left(PaymentError.InsufficientFunds) =&gt; Left(OrderResult.PaymentFailed(&quot;Insufficient funds&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        case Left(PaymentError.CardDeclined) =&gt; Left(OrderResult.PaymentFailed(&quot;Card declined&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        case Left(_) =&gt; Left(OrderResult.PaymentFailed(&quot;Unknown payment error&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def createOrder(user: User, products: List[Product], paymentId: String): Sealed[IO, Order, OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implementation details here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    orderRepository.create(user.id, products.map(p =&gt; OrderItem(p.id, 1)), paymentId).seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def calculateTotal(products: List[Product]): BigDecimal = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    products.map(_.price).sum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-dont-expose-sealed-monad-in-public-interfaces">‚ùå Don&#x27;t: Expose Sealed Monad in Public Interfaces<a class="hash-link" href="#-dont-expose-sealed-monad-in-public-interfaces" title="Direct link to heading">‚Äã</a></h3><p>Sealed Monad should never be exposed in the public interface of your module or service. It&#x27;s designed for internal processing and error handling only.</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå DON&#x27;T expose Sealed Monad in your public API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def create(auth: AuthContext, orgId: OrganizationId): Sealed[IO, Roadmap, RoadmapCreateResult]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ DO return the effect type with your ADT directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def create(auth: AuthContext, orgId: OrganizationId): IO[RoadmapCreateResult]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In a real service implementation, keep Sealed Monad internal:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">class RoadmapService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Define your Step type alias for better readability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private type Step[A] = Sealed[IO, A, RoadmapCreateResult]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Public interface returns IO[Result], not Sealed[IO, _, _]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def create(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auth: AuthContext, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    orgId: OrganizationId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request: RoadmapCreateRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ): IO[RoadmapCreateResult] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _            &lt;- checkAccessToOrganization(auth, orgId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      organization &lt;- findOrganization(orgId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      roadmap      &lt;- createRoadmap(organization, auth.id, request)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } yield RoadmapCreateResult.Created(roadmap)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Private methods use the Step type alias</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def checkAccessToOrganization(auth: AuthContext, id: OrganizationId): Sealed[IO, Boolean, RoadmapCreateResult] = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def findOrganization(id: OrganizationId): Sealed[IO, Organization, RoadmapCreateResult] = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def createRoadmap(org: Organization, userId: UserId, request: RoadmapCreateRequest): Sealed[IO, Roadmap, RoadmapCreateResult] = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>By keeping Sealed Monad as an implementation detail, you maintain cleaner module boundaries and avoid leaking implementation details to your API consumers.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-dont-mix-business-logic-with-technical-details">‚ùå Don&#x27;t: Mix Business Logic with Technical Details<a class="hash-link" href="#-dont-mix-business-logic-with-technical-details" title="Direct link to heading">‚Äã</a></h3><p>Avoid mixing different levels of abstraction:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Too much detail in the main flow - avoid this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(orderId: String): IO[OrderResult] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    orderOpt &lt;- orderRepository.findById(orderId).seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- orderOpt.valueOr(OrderResult.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ &lt;- order.pure[IO].ensure(!_.isExpired, OrderResult.Expired)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ &lt;- paymentService.processPayment(order.total).ensure(_.isSuccessful, OrderResult.PaymentFailed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ &lt;- emailService.sendConfirmation(order.userId, order.id).attempt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Right(_) =&gt; Right(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Left(_) =&gt; Left(OrderResult.EmailFailed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracking &lt;- shippingService.ship(order).seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResult.Success(tracking)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-method-names-as-documentation">‚úÖ Use Method Names as Documentation<a class="hash-link" href="#-use-method-names-as-documentation" title="Direct link to heading">‚Äã</a></h3><p>Choose method names that describe business operations clearly:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">def registerUser(request: RegisterRequest): IO[RegisterResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email     &lt;- validateEmail(request.email)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password  &lt;- validatePassword(request.password)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user      &lt;- createUserAccount(email, password)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _         &lt;- sendWelcomeEmail(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield RegisterResponse.Success(user.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3-working-with-options-and-either">3. Working with Options and Either<a class="hash-link" href="#3-working-with-options-and-either" title="Direct link to heading">‚Äã</a></h2><p>Sealed Monad provides elegant ways to work with Option and Either types.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-valueor-for-option-extraction">‚úÖ Use valueOr for Option Extraction<a class="hash-link" href="#-use-valueor-for-option-extraction" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Find a user by ID or return NotFound</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userRepository.findById(userId)  // IO[Option[User]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .valueOr[UserResponse](UserResponse.NotFound)  // Sealed[IO, User, UserResponse]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-chain-validations-fluently">‚úÖ Chain Validations Fluently<a class="hash-link" href="#-chain-validations-fluently" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Multiple validations in sequence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userRepository.findById(userId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .valueOr[UserResponse](UserResponse.NotFound)  // If user doesn&#x27;t exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .ensure(!_.archived, UserResponse.AccountDeleted)  // If account is deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .ensure(_.isActive, UserResponse.AccountInactive)  // If account isn&#x27;t active</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-ensure-for-conditional-validation">‚úÖ Use ensure for Conditional Validation<a class="hash-link" href="#-use-ensure-for-conditional-validation" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Validate a product&#x27;s availability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">product.pure[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .ensure(_.inStock, ProductResponse.OutOfStock)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .ensure(_.price &lt;= maxPrice, ProductResponse.PriceExceedsLimit)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-attempt-for-complex-transformations">‚úÖ Use attempt for Complex Transformations<a class="hash-link" href="#-use-attempt-for-complex-transformations" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Handle different validation errors differently</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">validateAddress(address).attempt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Right(validatedAddress) =&gt; Right(validatedAddress)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Left(AddressError.InvalidZipCode) =&gt; Left(UserResponse.InvalidZipCode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Left(AddressError.UnknownCity) =&gt; Left(UserResponse.UnknownCity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Left(_) =&gt; Left(UserResponse.InvalidAddress)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4-side-effects-and-debugging">4. Side Effects and Debugging<a class="hash-link" href="#4-side-effects-and-debugging" title="Direct link to heading">‚Äã</a></h2><p>Sealed Monad provides several operators for handling side effects without disrupting your main computation.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-tap-for-debugging-and-logging">‚úÖ Use tap for Debugging and Logging<a class="hash-link" href="#-use-tap-for-debugging-and-logging" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(orderId: String): IO[OrderResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- findOrder(orderId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .tap(order =&gt; logger.debug(s&quot;Found order: $order&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payment &lt;- processPayment(order)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .tap(payment =&gt; logger.info(s&quot;Payment processed: ${payment.id}&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResponse.Success(order.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-valueorf-ensuref-attemptf-for-logging-with-cats-effect">‚úÖ Use valueOrF, ensureF, attemptF for Logging with Cats Effect<a class="hash-link" href="#-use-valueorf-ensuref-attemptf-for-logging-with-cats-effect" title="Direct link to heading">‚Äã</a></h3><p>The <strong>valueOrF</strong> operator extends the valueOr pattern with effectful error handling. Here, when a job can&#x27;t be found, we log the error before returning the failure case. This allows for better observability while preserving your typed error channel.</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">private def findJob(jobName: String): Step[Job] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  jobService.findJob(jobName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .valueOrF(Logger[IO].error(s&quot;Unable to find job $jobName&quot;).as(JobResult.JobNotFound))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <strong>ensureF</strong> operator combines validation with effectful error handling. In this example, we ensure the query results are non-empty, and if they aren&#x27;t, we log an error message before returning the appropriate domain error. This pattern is perfect when you need to validate results and provide context about the failure.</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">private def listJobs(filters: Seq[JobFilter]): JobStep[Seq[Job]] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  jobRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .list(filters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ensureF(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _.nonEmpty,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Logger[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .error(&quot;No matching job found for request&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .as(JobResult.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <strong>attemptF</strong> operator is useful when you need to perform effects (like logging) during error handling. In this example, when a payment operation fails, we log the specific error before returning a typed error result. This provides rich context about failures while keeping your error handling clean and maintaining your typed error channel.</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">private def processJobPayment(job: Job): StepIO[PaymentConfirmation] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  paymentService.process(job.cost).seal.attemptF {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case PaymentResult.Success(confirmation) =&gt; IO.pure(Right(confirmation))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case PaymentResult.Declined =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Logger[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .error(s&quot;Payment declined for job ${job.id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .as(Left(JobResult.PaymentFailed(&quot;Payment declined&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case PaymentResult.InsufficientFunds =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Logger[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .error(s&quot;Insufficient funds for job ${job.id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .as(Left(JobResult.InsufficientFunds))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case PaymentResult.ProcessingError(error) =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Logger[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .error(s&quot;Payment processing error for job ${job.id}: $error&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .as(Left(JobResult.PaymentFailed(error)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-inspect-for-comprehensive-logging">‚úÖ Use inspect for Comprehensive Logging<a class="hash-link" href="#-use-inspect-for-comprehensive-logging" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Log different outcomes differently</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userValidation.inspect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Right(user) =&gt; logger.info(s&quot;User validated: ${user.email}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Left(error: ValidationError.InvalidEmail) =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.warn(s&quot;Invalid email format: ${error.email}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Left(error) =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.error(s&quot;Validation failed: $error&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-use-flattap-for-effectful-side-operations">‚úÖ Use flatTap for Effectful Side Operations<a class="hash-link" href="#-use-flattap-for-effectful-side-operations" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Perform side effects without affecting the main computation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user.flatTap(u =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  auditService.recordAccess(u.id, AccessType.Login)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5-testing-strategies">5. Testing Strategies<a class="hash-link" href="#5-testing-strategies" title="Direct link to heading">‚Äã</a></h2><p>Proper testing ensures your Sealed Monad code works as expected.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-test-all-possible-outcomes">‚úÖ Test All Possible Outcomes<a class="hash-link" href="#-test-all-possible-outcomes" title="Direct link to heading">‚Äã</a></h3><p>For each ADT case, write tests that ensure the correct outcome is produced:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import org.scalatest.flatspec.AnyFlatSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.scalatest.matchers.should.Matchers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import cats.effect.unsafe.implicits.global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class UserServiceSpec extends AnyFlatSpec with Matchers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;UserService.registerUser&quot; should &quot;return Success when registration succeeds&quot; in {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val service = new UserService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emailValidator = _ =&gt; IO.pure(true),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emailRepository = _ =&gt; IO.pure(false), // email doesn&#x27;t exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      passwordValidator = _ =&gt; IO.pure(true),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userRepository = (_, _) =&gt; IO.pure(User(&quot;user-123&quot;, &quot;test@example.com&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val result = service.registerUser(RegisterRequest(&quot;test@example.com&quot;, &quot;password123&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .unsafeRunSync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result shouldBe RegisterResponse.Success(&quot;user-123&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  it should &quot;return EmailInvalid when email is invalid&quot; in {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val service = new UserService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emailValidator = _ =&gt; IO.pure(false), // invalid email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emailRepository = _ =&gt; IO.pure(false),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      passwordValidator = _ =&gt; IO.pure(true),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userRepository = (_, _) =&gt; IO.pure(User(&quot;user-123&quot;, &quot;test@example.com&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val result = service.registerUser(RegisterRequest(&quot;invalid&quot;, &quot;password123&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .unsafeRunSync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result shouldBe RegisterResponse.EmailInvalid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Additional tests for other outcomes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-test-helper-methods-independently">‚úÖ Test Helper Methods Independently<a class="hash-link" href="#-test-helper-methods-independently" title="Direct link to heading">‚Äã</a></h3><p>Test your helper methods separately to ensure they work correctly in isolation:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;UserService.validateEmail&quot; should &quot;return valid email when format is correct and email doesn&#x27;t exist&quot; in {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val service = new UserService(/* ... */)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val result = service.validateEmail(&quot;valid@example.com&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .run.unsafeRunSync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  result shouldBe Right(&quot;valid@example.com&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="6-common-pitfalls-and-how-to-avoid-them">6. Common Pitfalls and How to Avoid Them<a class="hash-link" href="#6-common-pitfalls-and-how-to-avoid-them" title="Direct link to heading">‚Äã</a></h2><p>Being aware of common mistakes will help you use Sealed Monad more effectively.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-dont-forget-to-call-run">‚ùå Don&#x27;t: Forget to call .run<a class="hash-link" href="#-dont-forget-to-call-run" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// This doesn&#x27;t actually execute the computation!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(id: String): IO[OrderResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- orderRepository.findById(id).valueOr(OrderResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...more processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResponse.Success(order.id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Correct way - don&#x27;t forget .run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(id: String): IO[OrderResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- orderRepository.findById(id).valueOr(OrderResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...more processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResponse.Success(order.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-dont-mix-monad-transformers-with-sealed-monad">‚ùå Don&#x27;t: Mix Monad Transformers with Sealed Monad<a class="hash-link" href="#-dont-mix-monad-transformers-with-sealed-monad" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Don&#x27;t mix EitherT with Sealed Monad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processUser(id: String): IO[UserResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val eitherT = EitherT(userRepository.findById(id).map {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case Some(user) =&gt; Right(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case None =&gt; Left(UserResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This mixing makes code harder to follow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val sealed = for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user &lt;- eitherT.value.fromEither</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...more operations with Sealed Monad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield UserResponse.Success(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sealed.run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Better: stick with one approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processUser(id: String): IO[UserResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user &lt;- userRepository.findById(id).valueOr(UserResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...more operations with Sealed Monad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield UserResponse.Success(user)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-dont-use-overly-complex-transformations">‚ùå Don&#x27;t: Use overly complex transformations<a class="hash-link" href="#-dont-use-overly-complex-transformations" title="Direct link to heading">‚Äã</a></h3><p>If you find yourself writing complex transformations, consider breaking them down into smaller, focused methods:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Too complex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(id: String): IO[OrderResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- orderRepository.findById(id).valueOr(OrderResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ &lt;- paymentService.process(order.payment).attempt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Right(_) =&gt; Right(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Left(PaymentError.InsufficientFunds) =&gt; Left(OrderResponse.InsufficientFunds)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Left(PaymentError.PaymentDeclined) =&gt; Left(OrderResponse.PaymentDeclined)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Left(_) =&gt; Left(OrderResponse.PaymentFailed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResponse.Success(order.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Better: Extract complex logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def processOrder(id: String): IO[OrderResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order &lt;- findOrder(id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ &lt;- processPayment(order.payment)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } yield OrderResponse.Success(order.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private def findOrder(id: String): Sealed[IO, Order, OrderResponse] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  orderRepository.findById(id).valueOr(OrderResponse.NotFound)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private def processPayment(payment: Payment): Sealed[IO, Unit, OrderResponse] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  paymentService.process(payment).attempt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case Right(_) =&gt; Right(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case Left(PaymentError.InsufficientFunds) =&gt; Left(OrderResponse.InsufficientFunds)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case Left(PaymentError.PaymentDeclined) =&gt; Left(OrderResponse.PaymentDeclined)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case Left(_) =&gt; Left(OrderResponse.PaymentFailed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="7-migration-strategies">7. Migration Strategies<a class="hash-link" href="#7-migration-strategies" title="Direct link to heading">‚Äã</a></h2><p>If you&#x27;re migrating an existing codebase to use Sealed Monad, here are some recommended approaches:</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="gradual-adoption">Gradual Adoption<a class="hash-link" href="#gradual-adoption" title="Direct link to heading">‚Äã</a></h3><ol><li><strong>Start with new code</strong>: Apply Sealed Monad to new features first</li><li><strong>Identify pain points</strong>: Target existing code with complex error handling or nested pattern matching</li><li><strong>Refactor incrementally</strong>: Convert one method or service at a time</li><li><strong>Add comprehensive tests</strong>: Ensure behavior remains the same after refactoring</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-refactoring-path">Example Refactoring Path<a class="hash-link" href="#example-refactoring-path" title="Direct link to heading">‚Äã</a></h3><ol><li>Define your ADT for the operation result</li><li>Identify points where control flow branches (pattern matching, if/else)</li><li>Convert those to Sealed Monad operations (valueOr, ensure, etc.)</li><li>Wrap the body in a for-comprehension</li><li>Add a .run call at the end</li><li>Extract complex validation logic to helper methods</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="8-real-world-example-api-service">8. Real-World Example: API Service<a class="hash-link" href="#8-real-world-example-api-service" title="Direct link to heading">‚Äã</a></h2><p>Here&#x27;s a complete example of an API service using Sealed Monad:</p><div class="codeBlockContainer_J+bg language-scala theme-code-block"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import cats.effect.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import pl.iterators.sealedmonad.syntax._</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.circe.generic.auto._</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Domain models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class User(id: String, email: String, name: String, active: Boolean)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class RegisterRequest(email: String, password: String, name: String)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Result ADT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sealed trait RegisterResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object RegisterResponse {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case class Success(userId: String) extends RegisterResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object EmailAlreadyExists extends RegisterResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object InvalidEmailFormat extends RegisterResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case object PasswordTooWeak extends RegisterResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class UserService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  emailValidator: EmailValidator,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  passwordValidator: PasswordValidator,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  userRepository: UserRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import pl.iterators.sealedmonad.syntax._</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def register(request: RegisterRequest): IO[RegisterResponse] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (for {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Validate email format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ &lt;- emailValidator.isValid(request.email)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           .ensure(identity, RegisterResponse.InvalidEmailFormat)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Check if email already exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emailExists &lt;- userRepository.emailExists(request.email).seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ &lt;- (!emailExists).pure[IO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           .ensure(identity, RegisterResponse.EmailAlreadyExists)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Validate password strength</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ &lt;- passwordValidator.isStrong(request.password)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           .ensure(identity, RegisterResponse.PasswordTooWeak)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Create user account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user &lt;- userRepository.create(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                User(generateId(), request.email, request.name, true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ).seal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } yield RegisterResponse.Success(user.id)).run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private def generateId(): String = java.util.UUID.randomUUID().toString</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This example demonstrates many Sealed Monad best practices:</p><ul><li>Clear separation of high-level flow and implementation details</li><li>Well-designed ADT for response types</li><li>Validation performed at appropriate steps</li><li>Proper error handling and conversion</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/theiterators/sealed-monad/tree/master/docs/../docs/best-practices.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/sealed-monad/api-reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API Reference</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/sealed-monad/comparison"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Comparison with Other Approaches</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-designing-your-adts" class="table-of-contents__link toc-highlight">1. Designing Your ADTs</a><ul><li><a href="#-create-specific-descriptive-response-types" class="table-of-contents__link toc-highlight">‚úÖ Create Specific, Descriptive Response Types</a></li><li><a href="#-avoid-generic-error-types" class="table-of-contents__link toc-highlight">‚ùå Avoid Generic Error Types</a></li><li><a href="#-model-domain-specific-edge-cases" class="table-of-contents__link toc-highlight">‚úÖ Model Domain-Specific Edge Cases</a></li></ul></li><li><a href="#2-structuring-your-code" class="table-of-contents__link toc-highlight">2. Structuring Your Code</a><ul><li><a href="#-separate-high-level-flow-from-implementation-details" class="table-of-contents__link toc-highlight">‚úÖ Separate High-Level Flow from Implementation Details</a></li><li><a href="#-dont-expose-sealed-monad-in-public-interfaces" class="table-of-contents__link toc-highlight">‚ùå Don&#39;t: Expose Sealed Monad in Public Interfaces</a></li><li><a href="#-dont-mix-business-logic-with-technical-details" class="table-of-contents__link toc-highlight">‚ùå Don&#39;t: Mix Business Logic with Technical Details</a></li><li><a href="#-use-method-names-as-documentation" class="table-of-contents__link toc-highlight">‚úÖ Use Method Names as Documentation</a></li></ul></li><li><a href="#3-working-with-options-and-either" class="table-of-contents__link toc-highlight">3. Working with Options and Either</a><ul><li><a href="#-use-valueor-for-option-extraction" class="table-of-contents__link toc-highlight">‚úÖ Use valueOr for Option Extraction</a></li><li><a href="#-chain-validations-fluently" class="table-of-contents__link toc-highlight">‚úÖ Chain Validations Fluently</a></li><li><a href="#-use-ensure-for-conditional-validation" class="table-of-contents__link toc-highlight">‚úÖ Use ensure for Conditional Validation</a></li><li><a href="#-use-attempt-for-complex-transformations" class="table-of-contents__link toc-highlight">‚úÖ Use attempt for Complex Transformations</a></li></ul></li><li><a href="#4-side-effects-and-debugging" class="table-of-contents__link toc-highlight">4. Side Effects and Debugging</a><ul><li><a href="#-use-tap-for-debugging-and-logging" class="table-of-contents__link toc-highlight">‚úÖ Use tap for Debugging and Logging</a></li><li><a href="#-use-valueorf-ensuref-attemptf-for-logging-with-cats-effect" class="table-of-contents__link toc-highlight">‚úÖ Use valueOrF, ensureF, attemptF for Logging with Cats Effect</a></li><li><a href="#-use-inspect-for-comprehensive-logging" class="table-of-contents__link toc-highlight">‚úÖ Use inspect for Comprehensive Logging</a></li><li><a href="#-use-flattap-for-effectful-side-operations" class="table-of-contents__link toc-highlight">‚úÖ Use flatTap for Effectful Side Operations</a></li></ul></li><li><a href="#5-testing-strategies" class="table-of-contents__link toc-highlight">5. Testing Strategies</a><ul><li><a href="#-test-all-possible-outcomes" class="table-of-contents__link toc-highlight">‚úÖ Test All Possible Outcomes</a></li><li><a href="#-test-helper-methods-independently" class="table-of-contents__link toc-highlight">‚úÖ Test Helper Methods Independently</a></li></ul></li><li><a href="#6-common-pitfalls-and-how-to-avoid-them" class="table-of-contents__link toc-highlight">6. Common Pitfalls and How to Avoid Them</a><ul><li><a href="#-dont-forget-to-call-run" class="table-of-contents__link toc-highlight">‚ùå Don&#39;t: Forget to call .run</a></li><li><a href="#-dont-mix-monad-transformers-with-sealed-monad" class="table-of-contents__link toc-highlight">‚ùå Don&#39;t: Mix Monad Transformers with Sealed Monad</a></li><li><a href="#-dont-use-overly-complex-transformations" class="table-of-contents__link toc-highlight">‚ùå Don&#39;t: Use overly complex transformations</a></li></ul></li><li><a href="#7-migration-strategies" class="table-of-contents__link toc-highlight">7. Migration Strategies</a><ul><li><a href="#gradual-adoption" class="table-of-contents__link toc-highlight">Gradual Adoption</a></li><li><a href="#example-refactoring-path" class="table-of-contents__link toc-highlight">Example Refactoring Path</a></li></ul></li><li><a href="#8-real-world-example-api-service" class="table-of-contents__link toc-highlight">8. Real-World Example: API Service</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sealed-monad/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/iteratorshq" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/theiterators/sealed-monad" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 <a href="https://www.iteratorshq.com">Iterators</a> sp. z o.o.</div></div></div></footer></div>
<script src="/sealed-monad/assets/js/runtime~main.a5490e7f.js"></script>
<script src="/sealed-monad/assets/js/main.15292e1b.js"></script>
</body>
</html>